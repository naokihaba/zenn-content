---
title: "ã€graphql-uploadã€‘export in package.json causes import failuresã®è§£æ¶ˆæ–¹æ³•"
emoji: "ğŸˆ"
type: "tech"
topics:
  - "graphql"
  - "typescript"
  - "npm"
  - "nestjs"
published: true
published_at: "2022-10-19 10:51"
---

# ã¯ã˜ã‚ã«

ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹é–¢ä¿‚ä¸Šã€`multipart/form-data`ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å—ã‘å–ã‚‹å¿…è¦ãŒã‚ã£ãŸã®ã§`graphql-upload`ã‚’åˆ©ç”¨ã—ãŸãŒã€€`No "main" export in package.json causes import failures`ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã®ã§èª¿æŸ»ã—ãŸçµæœã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

# ç’°å¢ƒ

`graphql-upload` latest(16.0.2ï¼‰ã§ç™ºç”Ÿ

`graphql-upload`ã®`README.md`ã«è¨˜è¼‰ã®ã‚ã‚‹`Requirements`ã®é€šã‚Šã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å¤‰æ›´ã—ãŸ

# çµè«–

`graphql-upload-minimal`ã§ä»£ç”¨ã—ã¾ã—ãŸ
ã“ã¡ã‚‰ã¯`graphql-upload`ã‚’ãƒ•ã‚©ãƒ¼ã‚¯ã•ã‚Œã¦ä½œã‚‰ã‚ŒãŸã‚‚ã®ãªã®ã§åŒã˜ã‚ˆã†ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™

https://github.com/flash-oss/graphql-upload-minimal

https://github.com/jaydenseric/graphql-upload/issues/305#issuecomment-1260573907

> Simply said, if you're not ready for the enlightenment, just stick with the @13 version ğŸ˜„ or use graphql-upload-minimal package

å®Ÿéš›ã«åˆ©ç”¨ã™ã‚‹å ´åˆã¯ä»¥ä¸‹ã®å½¢å¼ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆå…ˆã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§åˆ©ç”¨ãŒå¯èƒ½ã§ã™
`NestJS`ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ãŒ`Node.js`ç­‰ã§åˆ©ç”¨ã•ã‚Œã‚‹å ´åˆã¯æ§‹æ–‡ã‚’èª­ã¿æ›¿ãˆã¦ã„ãŸã ã‘ã‚Œã°åŒæ§˜ã®çµæœã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

```ts:app.module.ts
import { MiddlewareConsumer, Module } from '@nestjs/common'
import { AppController } from './app.controller'
import { PrismaModule } from './prisma/prisma.module'
import { GraphQLModule } from '@nestjs/graphql'
import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo'
import * as Process from 'process'
import * as path from 'path'
import { LoggerModule } from 'nestjs-pino'
import { ConfigModule } from '@nestjs/config'
import { AuthorModule } from './author/author.module'
import { AppService } from './app.service'
import configuration from './common/config/configuration'
import { graphqlUploadExpress } from 'graphql-upload-minimal'


@Module({
  imports: [
    LoggerModule.forRoot(),
    PrismaModule,
    ConfigModule.forRoot({
      isGlobal: true,
      load: [configuration],
    }),
    AuthorModule,
    GraphQLModule.forRoot<ApolloDriverConfig>({
      driver: ApolloDriver,
      autoSchemaFile: path.join(process.cwd(), 'src/graphql/schema.gql'),
      sortSchema: true,
    }),
    CustomJwtModule,
    Auth0Module,
  ],
  providers: [AppService],
  controllers: [AppController],
})
export class AppModule {
  configure(consumer: MiddlewareConsumer) {
    consumer.apply(graphqlUploadExpress()).forRoutes('graphql')
  }
```