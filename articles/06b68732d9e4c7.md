---
title: "ã€Laravelã€‘UUIDã‚«ãƒ©ãƒ ã‚’URLã«å‰²ã‚Šå½“ã¦ã‚‹ã¨ãƒ«ãƒ¼ãƒˆã«å‰²å½“ã•ã‚Œãªã‹ã£ãŸå ´åˆã®å¯¾ç­–"
emoji: "ğŸ—‚ï¸"
type: "tech"
topics:
  - "laravel"
  - "php"
  - "composer"
  - "uuid"
published: true
published_at: "2022-03-22 03:56"
---

# æ¦‚è¦

ä¸»ã‚­ãƒ¼ã‚’`UUID`ã«ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã®ã§ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«å°å…¥ã—ãŸã€‚

ãƒ«ãƒ¼ãƒˆãƒ¢ãƒ‡ãƒ«ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã§`UUID`ã‚’å‰²ã‚Šå½“ã¦ã‚‹ã¨`404`ã‚¨ãƒ©ãƒ¼ã§ãƒ«ãƒ¼ãƒˆã«åˆ°é”ã§ããªã„äº‹è±¡ãŒã‚ã£ãŸã®ã§è§£æ±ºæ–¹æ³•ã‚’ã¾ã¨ã‚ã‚‹

```php:web.php
<?php
Route::prefix('post')->group(function () {
    Route::get('/edit/{uuid?}', [PostController::class, 'edit'])->name('admin.posts.edit');
});
```

https://qiita.com/ucan-lab/items/a8374ba421fe7828dcb9

# ç’°å¢ƒ
- PHP 7.4.25
- Laravel Framework 6.20.44
- laravel-eloquent-uuid v6.*


# å°å…¥æ‰‹é †

https://github.com/goldspecdigital/laravel-eloquent-uuid

```bash
composer require goldspecdigital/laravel-eloquent-uuid:^6.0
```


# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ

```php:CreatePostsTable
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Schema;

class CreatePostsTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('posts', function (Blueprint $table) {
            $table->uuid('uuid')->primary();
            $table->string('name', 255);
            $table->text('note')->nullable();
            $table->timestamp('created_at')->default(DB::raw('CURRENT_TIMESTAMP'));
            $table->timestamp('updated_at')->default(DB::raw('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('posts');
    }
}
```

# ãƒ¢ãƒ‡ãƒ«ä½œæˆ

```php:Post.php
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Post extends Model
{
    /**
     * ãƒ¢ãƒ‡ãƒ«ã«é–¢é€£ä»˜ã‘ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«
     *
     * @var string
     */
    protected $table = 'posts';

    /**
     * ãƒ†ãƒ¼ãƒ–ãƒ«ã«é–¢é€£ä»˜ã‘ã‚‹ä¸»ã‚­ãƒ¼
     *
     * @var string
     */
    protected $primaryKey = 'uuid';

    /**
     * ãƒ¢ãƒ‡ãƒ«ã®IDã‚’è‡ªå‹•å¢—åˆ†ã™ã‚‹ã‹
     *
     * @var bool
     */
    public $incrementing = false;

    /**
     * è¤‡æ•°ä»£å…¥å¯èƒ½ãªå±æ€§
     *
     * @var array
     */
    protected $fillable = ['uuid', 'name', 'note'];
}
```

# Bladeãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆ

- ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã“ã¨ã§ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒˆã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹æƒ³å®šã ã£ãŸãŒ`404`ãŒè¿”ã£ã¦ããŸ

```php:web.php
<?php
Route::prefix('post')->group(function () {
    Route::get('/edit/{uuid?}', [PostController::class, 'edit'])->name('admin.posts.edit');
});
```

```php:index.blade.php
@foreach ($posts as $post)
    <tr>
        <td>
            <a href="{{route('admin.posts.edit',['uuid'=>$post->uuid])}}">
                {{ $post->uuid }}
            </a>
        </td>
    </tr>
@endforeach
```

# è§£æ±ºæ–¹æ³•

- ã‚­ãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€€æœŸå¾…é€šã‚Šãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã‚‹

https://github.com/michaeldyrynda/laravel-model-uuid/issues/104

https://laravel.com/docs/8.x/routing#customizing-the-key

```php:web.php
<?php
Route::prefix('post')->group(function () {
    Route::get('/posts/{uuid?}', [PostController::class, 'edit'])->name('admin.posts.edit');
});
```
