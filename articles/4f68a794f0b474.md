---
title: "Vue 3.5 ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã¤ã„ã¦"
emoji: "ğŸ¦"
type: "tech"
topics: ["Vue", "JavaScript", "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰"]
published: false
---

# ã¯ã˜ã‚ã«

2024å¹´9æœˆ1æ—¥ã« Vue 3.5 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€Vue 3.5 ã®ä¸»ãªæ©Ÿèƒ½æ”¹å–„ãƒ»è¿½åŠ ã¨ãã®èƒŒæ™¯ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚

https://blog.vuejs.org/posts/vue-3-5


## ä¸»ãªæ©Ÿèƒ½æ”¹å–„ãƒ»è¿½åŠ 

1. **Reactive Props Destructure ã®å®‰å®šåŒ–**
2. **SSRã®æ”¹å–„**
   - `Lazy Hydration`
   - `useId()`
   - `data-allow-mismatch`
3. **Custom Elements Improvements ã®æ”¹è‰¯**
4. **ãã®ä»–ã®æ©Ÿèƒ½è¿½åŠ **
   - `useTemplateRef()`
   - `Deferred Teleport`
   - `onWatcherCleanup()`
5. **Reactivity System ã®æ”¹å–„**ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š

## Reactive Props Destructure ã®å®‰å®šåŒ–

`<script setup>` å†…ã§ `defineProps` ã‹ã‚‰åˆ†å‰²ä»£å…¥ã•ã‚ŒãŸå¤‰æ•°ãŒè‡ªå‹•çš„ã«ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã‚‹æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚³ãƒ¼ãƒ‰ãŒã‚ˆã‚Šç°¡æ½”ã«ãªã‚Šã€å¯èª­æ€§ãŒå‘ä¸Šã—ã¾ã™ã€‚

### RFC

https://github.com/vuejs/rfcs/discussions/502

### ä½¿ç”¨ä¾‹

#### ä»¥å‰ã®æ›¸ãæ–¹ï¼š

```vue
<script setup lang="ts">
import { computed } from 'vue'

const props = withDefaults(defineProps<{
  count?: number
}>(), {
  count: 0
})

const double = computed(() => props.count * 2)
</script>

<template>
  <div>Count: {{ props.count }}</div>
  <div>Double: {{ double }}</div>
</template>
```

#### Vue 3.5 ä»¥é™ï¼š

```vue
<script setup lang="ts">
import { computed } from 'vue'

const { count = 0 } = defineProps<{
  count?: number
}>()

const double = computed(() => count * 2)
</script>

<template>
  <div>Count: {{ count }}</div>
  <div>Double: {{ double }}</div>
</template>
```

ã“ã®æ–°ã—ã„æ›¸ãæ–¹ã§ã¯ã€`withDefaults` ã‚’ä½¿ç”¨ã›ãšã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã¾ãŸã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒç›´æ¥çš„ã«ãªã‚Šã€ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ãŒå‘ä¸Šã—ã¦ã„ã¾ã™ã€‚

## å†…éƒ¨çš„ãªå‹•ä½œã®å¤‰åŒ–

Vue 3.5ã®æ–°æ©Ÿèƒ½ã«ã‚ˆã‚Šã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œã®ã‚³ãƒ¼ãƒ‰ã«ã‚‚å¤‰æ›´ãŒåŠ ãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã«ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å‰å¾Œã®ã‚³ãƒ¼ãƒ‰ã®é•ã„ã‚’ç¤ºã—ã¾ã™ã€‚

### Reactive Props Destructure ä»¥å‰

å…¥åŠ›ï¼š

```vue
<script setup lang="ts">
import { computed } from 'vue'

const props = defineProps<{
  count?: number
}>()

const double = computed(() => props.count * 2)
</script>

<template>
  <div>Count: {{ count }}</div>
  <div>Double: {{ double }}</div>
</template>
```

å‡ºåŠ›ï¼ˆä¸€éƒ¨æŠœç²‹ï¼‰ï¼š

```js
const __sfc__ = /*#__PURE__*/_defineComponent({
  // ...
  setup(__props, { expose: __expose }) {
    __expose();

    const props = __props

    const double = computed(() => props.count * 2)

    const __returned__ = { props, double }
    // ...
    return __returned__
  }
});
```

### Reactive Props Destructure ä»¥é™

å…¥åŠ›ï¼š

```vue
<script setup lang="ts">
import { computed } from 'vue'

const { count = 0 } = defineProps<{
  count?: number
}>()

const double = computed(() => count * 2)
</script>

<template>
  <div>Count: {{ count }}</div>
  <div>Double: {{ double }}</div>
</template>
```

å‡ºåŠ›ï¼ˆä¸€éƒ¨æŠœç²‹ï¼‰ï¼š

```js
const __sfc__ = /*#__PURE__*/_defineComponent({
  // ...
  props: {
    count: { type: Number, required: false, default: 0 }
  },
  setup(__props, { expose: __expose }) {
    __expose();

    const double = computed(() => __props.count * 2)

    const __returned__ = { double }
    // ...
    return __returned__
  }
});
```

ã“ã®å¤‰æ›´ã«ã‚ˆã‚Šã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® `props` ã‚ªãƒ—ã‚·ãƒ§ãƒ³å†…ã§ç›´æ¥å®šç¾©ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã€`setup` é–¢æ•°å†…ã§ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å–ã‚Šæ‰±ã„ãŒç°¡ç•¥åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚