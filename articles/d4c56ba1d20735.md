---
title: "Laravel + PHPUnitã§ãƒ†ã‚¹ãƒˆå·¥ç¨‹ã‚’çˆ†é€ŸåŒ–ã•ã›ã‚‹"
emoji: "ğŸ§ª"
type: "tech"
topics:
  - "laravel"
  - "phpunit"
  - "ddd"
  - "unittest"
published: true
published_at: "2021-12-05 01:11"
---

# æ¦‚è¦

ä»Šå›ã¯å˜ä½“ãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•åŒ–ã•ã›ãŸæ™‚ã®å‚™å¿˜éŒ²ã‚’ã¾ã¨ã‚ã¾ã™
> Laravelã¯ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚‚è€ƒæ…®ã—ã¦æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿéš›ã€PHPUnitã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€æœ€åˆã‹ã‚‰å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

https://readouble.com/laravel/8.x/ja/testing.html

# ã“ã®è¨˜äº‹ã§ä¼ãˆãŸã„ã“ã¨
PHPUnitã§å˜ä½“ãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•

# ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚¯ãƒ©ã‚¹

æ³•äººåã‚’è¿”å´ã™ã‚‹å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å˜ä½“ãƒ†ã‚¹ãƒˆã—ã¾ã™

https://zenn.dev/chida/articles/aa2a63cdf2eb52

```php:App\Domains\AdminCompany.php
<?php

namespace App\Domains\AdminCompany;

class AdminCompany
{
    private $adminCompanyName;

    public function __construct(
        AdminCompanyName $adminCompanyName,
    ) {
        $this->adminCompanyName = $adminCompanyName;
    }


    public function getName(): ?AdminCompanyName
    {
        return $this->adminCompanyName;
    }
}

```

# ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰

:::message
ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã«ç‹¬è‡ªã®setUpãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã™ã‚‹å ´åˆã¯ã€è¦ªã®ã‚¯ãƒ©ã‚¹ã®parent::setUp()ï¼parent::tearDown()ã‚’ç¢ºå®Ÿã«å‘¼ã³å‡ºã—ã¦ãã ã•ã„
:::

```php:\Tests\Unit\Domains\AdminCompanyTest.php
<?php
namespace Tests\Unit\Domains\AdminCompany;

use App\Domains\AdminCompany\AdminCompany;
use ArgumentCountError;
use PHPUnit\Framework\TestCase;

class AdminCompanyTest extends TestCase
{

    private $adminCompanyName;

    protected function setUp(): void
    {
        // å¿…é ˆ
        parent::setUp();

        $this->adminCompany = new AdminCompany(
            $this->adminCompanyName = new AdminCompanyName('example'),
        );
    }

    public function test_ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ä½•ã‚‚æ¸¡ã•ãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹()
    {
        $this->expectException(ArgumentCountError::class);
        new AdminCompany();
    }

    public function test_getName_ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«æ­£ã—ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ¸¡ã™ã¨æ¸¡ã•ã‚ŒãŸå€¤ã‚’è¿”ã™()
    {
        $this->assertEquals($this->adminCompanyName, $this->adminCompany->getName());
    }
}
```

# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹

```bash:bash
./vendor/bin/phpunit

==== Redirecting to composer installed version in vendor/phpunit ====

PHPUnit 7.5.9 by Sebastian Bergmann and contributors.

..........                                                        2 / 2 (100%)

Time: 8.11 seconds, Memory: 24.00 MB
OK (2 tests, 2 assertions)
```

# æœ€å¾Œã«

èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚
ä»Šå›ã®è¨˜äº‹ã¯ã„ã‹ãŒã§ã—ãŸã‹ï¼Ÿ
ãƒ»ã“ã†ã„ã†è¨˜äº‹ãŒèª­ã¿ãŸã„
ãƒ»ã“ã†ã„ã†ã¨ã“ã‚ãŒè‰¯ã‹ã£ãŸ
ãƒ»ã“ã†ã—ãŸæ–¹ãŒè‰¯ã„ã®ã§ã¯ãªã„ã‹
ãªã©ãªã©ã€ç‡ç›´ãªã”æ„è¦‹ã‚’å‹Ÿé›†ã—ã¦ãŠã‚Šã¾ã™ã€‚