---
title: "Pinia å…¥é–€"
emoji: "ğŸ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [ 'pinia', 'javaScript', 'Vue.js','typescript' ]
published: true
publication_name: "comm_vue_nuxt"
---

## ã¯ã˜ã‚ã«

Vue.js ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã™ã‚‹éš›ã€çŠ¶æ…‹ç®¡ç†ã¯é¿ã‘ã¦é€šã‚Œãªã„èª²é¡Œã®ã²ã¨ã¤ã§ã™ã€‚é•·ã‚‰ãå…¬å¼ã«æ¨å¥¨ã•ã‚Œã¦ããŸã®ãŒã€ŒVuexã€ã¨ã„ã†çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã—ãŸã€‚ã—ã‹ã—ã€Vuex ã¯æŸ”è»Ÿã§å¼·åŠ›ãªä¸€æ–¹ã€æ¬¡ç¬¬ã«ãã®è¨­å®šã®è¤‡é›‘ã•ã‚„ã‚³ãƒ¼ãƒ‰é‡ã®å¤šã•ãŒèª²é¡Œã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

ãã‚“ãªä¸­ã€ç™»å ´ã—ãŸã®ãŒ **Pinia** ã§ã™ã€‚Pinia ã¯ Vue.js ã®å…¬å¼çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ä½ç½®ã¥ã‘ã‚‰ã‚Œã¦ãŠã‚Šã€ç¾åœ¨ã¯ **Vue.js ã®æ–°ã—ã„ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª** ã¨ã—ã¦æ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚Pinia ã® API ã¯ã€Vuex 5 RFCï¼ˆRequest for Commentsï¼‰ã§ææ¡ˆã•ã‚ŒãŸä»•æ§˜ã¨ã»ã¼åŒç­‰ã€ã¾ãŸã¯ãã‚Œä»¥ä¸Šã«å¼·åŒ–ã•ã‚Œã¦ãŠã‚Šã€Vue 2.x ã§ã‚‚åˆ©ç”¨å¯èƒ½ã§ã™ã€‚

https://pinia.vuejs.org/introduction.html

> The official state management library for Vue has changed to Pinia. Pinia has almost the exact same or enhanced API as Vuex 5, described in Vuex 5 RFC. You could simply consider Pinia as Vuex 5 with a different name. Pinia also works with Vue 2.x as well.  
> ï¼ˆå¼•ç”¨å…ƒï¼š[GitHub - Vuex](https://github.com/vuejs/vuex)ï¼‰

ãªãŠã€Vuex 3 ãŠã‚ˆã³ Vuex 4 ã¯å¼•ãç¶šãä¿å®ˆã•ã‚Œã¾ã™ãŒã€æ–°ã—ã„æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã‚‹å¯èƒ½æ€§ã¯ä½ã„ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚‚ã—æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å§‹ã‚ã‚‹å ´åˆã€Pinia ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’å…¬å¼ã‚‚å¼·ãæ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚ä¸€æ–¹ã€æ—¢å­˜ã® Vuex ã‚¢ãƒ—ãƒªã‚’ Pinia ã«ç§»è¡Œã™ã‚‹éš›ã«ã¯ã€Vuex ã¨ Pinia ã‚’åŒã˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§å…±å­˜ã•ã›ãªãŒã‚‰ç§»è¡Œã‚’é€²ã‚ã‚‹æ–¹æ³•ã‚‚é¸æŠè‚¢ã¨ã—ã¦è€ƒãˆã‚‰ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚

æœ¬è¨˜äº‹ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹ã‚’å¯¾è±¡ã«ã€Pinia ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‹ã‚‰ Vuex ã¨ã®é•ã„ã€ã•ã‚‰ã« Vuex ã‹ã‚‰ Pinia ã¸ã®ç§»è¡Œæ–¹æ³•ã¾ã§ã‚’è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚

- Vue.js ã®çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ Pinia ã‚’ä½¿ã„ãŸã„æ–¹  
- Pinia ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‚’çŸ¥ã‚ŠãŸã„æ–¹  
- Vuex ã‚’ä½¿ã£ã¦ã„ã¦ Pinia ã¸ã®ç§»è¡Œã‚’è€ƒãˆã¦ã„ã‚‹æ–¹  

Pinia ã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€Vue.js ã®é–‹ç™ºä½“é¨“ãŒã©ã®ã‚ˆã†ã«å¤‰ã‚ã‚‹ã®ã‹ã€ä¸€ç·’ã«è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ï¼

## Pinia ã®æ¦‚è¦

### Pinia ã¨ã¯ï¼Ÿ

Pinia ã¯ Vue.js ã®å…¬å¼çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦èªå®šã•ã‚Œã¦ãŠã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§çŠ¶æ…‹ï¼ˆstateï¼‰ã‚’å…±æœ‰ãƒ»ç®¡ç†ã™ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã§ã™ã€‚Vue 2.x ã¨ Vue 3 ã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€ç‰¹ã«ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆSSRï¼‰ã‚„å¤§è¦æ¨¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

Pinia ã®å¤§ããªé­…åŠ›ã¯ã€ãã®ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„ãª API ã¨å¤šå½©ãªé–‹ç™ºæ”¯æ´æ©Ÿèƒ½ã«ã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã«ã€Pinia ã‚’é¸ã¶ã¹ãç†ç”±ã‚’å…·ä½“çš„ã«æŒ™ã’ã¦ã„ãã¾ã™ã€‚

### Pinia ã®ç‰¹é•·

1. **é–‹ç™ºä½“é¨“ã®å‘ä¸Š**  
   - **Devtools ã‚µãƒãƒ¼ãƒˆ**ï¼šVue DevTools ã¨çµ±åˆã•ã‚Œã¦ãŠã‚Šã€çŠ¶æ…‹ã‚„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚’è¦–è¦šçš„ã«è¿½è·¡å¯èƒ½ã€‚  
   - **ã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«**ï¼šéå»ã®çŠ¶æ…‹ã«æˆ»ã‚‹ã€Œã‚¿ã‚¤ãƒ ãƒˆãƒ©ãƒ™ãƒ«æ©Ÿèƒ½ã€ã‚’ä½¿ã„ã€ãƒ‡ãƒãƒƒã‚°ãŒå®¹æ˜“ã«ã€‚  
   - **ãƒ›ãƒƒãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒªãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ¡ãƒ³ãƒˆï¼ˆHMRï¼‰**ï¼šé–‹ç™ºä¸­ã«çŠ¶æ…‹ã‚’ä¿æŒã—ãŸã¾ã¾ã‚¹ãƒˆã‚¢ã‚’æ›´æ–°å¯èƒ½ã§ã€åŠ¹ç‡çš„ãªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒå¯èƒ½ã€‚

2. **æ©Ÿèƒ½ã®æ‹¡å¼µæ€§**  
   - **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®åˆ©ç”¨**ï¼šPinia ã®æ©Ÿèƒ½ã‚’è‡ªç”±ã«æ‹¡å¼µå¯èƒ½ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‹ãƒ¼ã‚ºã«å¿œã˜ãŸã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¯èƒ½ã€‚  
   - **ã‚¹ãƒˆã‚¢ã®å¯è¦–æ€§**ï¼šPinia ã‚¹ãƒˆã‚¢ã¯ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ç›´æ¥è¡¨ç¤ºã•ã‚Œã€è¿½è·¡ãŒç°¡å˜ã€‚

3. **å¤šæ§˜ãªã‚µãƒãƒ¼ãƒˆæ©Ÿèƒ½**  
   - **ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«**ï¼šPinia ã¯ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’å‚™ãˆã¦ãŠã‚Šã€ã‚¹ãƒˆã‚¢ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚„å‹•ä½œã‚’ç°¡å˜ã«æ¤œè¨¼å¯èƒ½ã€‚  
   - **ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆSSRï¼‰å¯¾å¿œ**ï¼šSSR ç’°å¢ƒã§ã‚‚å®‰å…¨ã‹ã¤åŠ¹ç‡çš„ã«çŠ¶æ…‹ç®¡ç†ã‚’è¡Œãˆã‚‹ã€‚

4. **å‹å®‰å…¨æ€§**  
   - **TypeScript ã¨ã®è¦ªå’Œæ€§**ï¼šå‹æ¨è«–ã‚„ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆãŒå¼·åŠ›ã§ã€JavaScript ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦ã‚‚ã‚³ãƒ¼ãƒ‰è£œå®ŒãŒä½¿ã„ã‚„ã™ã„ã€‚  

Pinia ã¯ã€ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’é€šã˜ã¦ã€Vue.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºåŠ¹ç‡ã¨ãƒ‡ãƒãƒƒã‚°ä½“é¨“ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã¾ã™ã€‚

## Pinia ã‚’ä½¿ã£ã¦ã¿ã‚‹

Pinia ã®æ¦‚è¦ã‚’ç†è§£ã—ãŸã¨ã“ã‚ã§ã€å®Ÿéš›ã« Pinia ã‚’ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã“ã§ã¯ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹æµã‚Œã‚’ä¾‹ã«ã€Pinia ã®åŸºæœ¬çš„ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ã‚¹ãƒˆã‚¢ã®ä½œæˆæ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™ã€‚

äº‹å‰ã« Vue 3 ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¾ã™ï¼ˆå‚è€ƒï¼š[Vue CLI ã‚’ä½¿ã£ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ–¹æ³•](https://ja.vuejs.org/guide/quick-start.html)ï¼‰ã€‚  

æ‰‹å…ƒã§ã‚µã‚¯ãƒƒã¨è©¦ã—ãŸã„æ–¹ã¯ã€ä»¥ä¸‹ã® `StackBlitz` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã”è¦§ãã ã•ã„ã€‚  

https://stackblitz.com/edit/vitejs-vite-udeybrke?file=src%2Fstores%2Fcounter.ts

### Pinia ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã¾ãšã€Pinia ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```bash
pnpm install pinia
```

ã¾ãŸã¯ã€npm/yarn ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

```bash
npm install pinia
# ã¾ãŸã¯
yarn add pinia
```

### Pinia ã®åˆæœŸåŒ–

æ¬¡ã«ã€Pinia ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ„ã¿è¾¼ã¿ã¾ã™ã€‚`main.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ã€‚

```ts
// main.ts
import { createApp } from 'vue'
import { createPinia } from 'pinia'
import App from './App.vue'

// Vue ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ
const app = createApp(App)

// Pinia ã‚’ä½œæˆã—ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ç™»éŒ²
const pinia = createPinia()
app.use(pinia)

// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒã‚¦ãƒ³ãƒˆ
app.mount('#app')
```

Pinia ã‚’ Vue ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§åˆ©ç”¨ã§ãã‚‹çŠ¶æ…‹ã«ã™ã‚‹ãŸã‚ã€`createPinia` ã‚’å‘¼ã³å‡ºã—ã¦ã‚¢ãƒ—ãƒªã«ç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚

### ã‚¹ãƒˆã‚¢ã®ä½œæˆ

æ¬¡ã«ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹ã‚¹ãƒˆã‚¢ã‚’ä½œæˆã—ã¾ã™ã€‚Pinia ã§ã¯ã€`defineStore` ã‚’ä½¿ç”¨ã—ã¦ã‚¹ãƒˆã‚¢ã‚’å®šç¾©ã—ã¾ã™ã€‚

```ts
// stores/counter.ts
import { defineStore } from 'pinia';

interface CounterState {
  count: number;
}

export const useCounterStore = defineStore('counter', {
  // åˆæœŸçŠ¶æ…‹ã‚’å®šç¾©
  state: (): CounterState => ({
    count: 0,
  }),
  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆçŠ¶æ…‹å¤‰æ›´ã‚’å®šç¾©ï¼‰
  actions: {
    increment() {
      this.count++;
    },
    decrement() {
      this.count--;
    },
    reset() {
      this.count = 0;
    },
  },
});
```

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ä»¥ä¸‹ã®å½¹å‰²ã‚’æŒã£ã¦ã„ã¾ã™ï¼š

- **state**: ç®¡ç†ã—ãŸã„çŠ¶æ…‹ã‚’å®šç¾©ã€‚ã“ã“ã§ã¯ `count` ã‚’åˆæœŸå€¤ 0 ã§å®šç¾©ã—ã¦ã„ã¾ã™ã€‚  
- **actions**: çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã®é–¢æ•°ã‚’å®šç¾©ã€‚ä¾‹ã¨ã—ã¦ã€ã‚«ã‚¦ãƒ³ãƒˆã‚’å¢—æ¸›ã™ã‚‹ `increment` ã¨ `decrement`ã€ãƒªã‚»ãƒƒãƒˆã™ã‚‹ `reset` ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

### Pinia Store ã®å‹•ä½œç¢ºèª

ã“ã‚Œã§ç°¡æ˜“çš„ãªã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚¹ãƒˆã‚¢ãŒå®Œæˆã—ã¾ã—ãŸï¼  
ã‚¹ãƒˆã‚¢ã‚’ä½¿ã†ã«ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ä»¥ä¸‹ã®ã‚ˆã†ã«å‘¼ã³å‡ºã—ã¾ã™ï¼š

```ts
// App.vue
<script setup lang="ts">
import { useCounterStore } from './stores/counter';

const counter = useCounterStore();

const increment = () => counter.increment();
const decrement = () => counter.decrement();
const reset = () => counter.reset();
</script>

<template>
  <div class="counter">
    <button @click="decrement">-</button>
    <span>Count: {{ counter.count }}</span>
    <button @click="increment">+</button>
    <button @click="reset" class="reset">Reset</button>
  </div>
</template>
```

ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€`+` ã‚„ `-` ã‚’æŠ¼ã™ã¨ã‚«ã‚¦ãƒ³ãƒˆãŒå¤‰åŒ–ã—ã¾ã™ã€‚ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€ã‚«ã‚¦ãƒ³ãƒˆãŒ 0 ã«æˆ»ã‚Šã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«ã€Pinia ã‚’ä½¿ã†ã“ã¨ã§ã€Vue.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ç®¡ç†ãŒã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„ã«ãªã‚Šã¾ã™ã€‚

## Vuex ã§å®Ÿè£…ã—ãŸå ´åˆ

Pinia ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‚’çŸ¥ã£ãŸã¨ã“ã‚ã§ã€Vuex ã®å ´åˆã¨æ¯”è¼ƒã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

æ‰‹å…ƒã§ã‚µã‚¯ãƒƒã¨è©¦ã—ãŸã„æ–¹ã¯ã€ä»¥ä¸‹ã® `StackBlitz` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã”è¦§ãã ã•ã„ã€‚  

https://stackblitz.com/edit/vitejs-vite-ekgku3p2?file=src%2Fmain.ts

### Vuex ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Vuex ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```bash
pnpm install vuex@next
```

ã¾ãŸã¯ã€npm/yarn ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

```bash
npm install vuex@next
# ã¾ãŸã¯
yarn add vuex@next
```

### Vuex ã®åˆæœŸåŒ–

```ts
import { createApp } from 'vue'
import App from './App.vue'
import store from './store'

const app = createApp(App)
app.use(store)
app.mount('#app')
```

### Vuex Store ã®ä½œæˆ

```ts
// store/index.ts
import { createStore } from 'vuex';

interface State {
  count: number;
}

export default createStore({
  state: {
    count: 0,
  },
  mutations: {
    increment(state: State) {
      state.count++;
    },
    decrement(state: State) {
      state.count--;
    },
    reset(state: State) {
      state.count = 0;
    },
  },
  actions: {
    increment({ commit }) {
      commit('increment');
    },
    decrement({ commit }) {
      commit('decrement');
    },
    reset({ commit }) {
      commit('reset');
    },
  },
  modules: {},
});

```

### Vuex Store ã®å‹•ä½œç¢ºèª

```ts
// App.vue
<script setup lang="ts">
import { useStore } from 'vuex';
import { computed } from 'vue';
import { State } from './store/types';

const store = useStore<State>();

const count = computed(() => store.state.count);

const increment = () => store.dispatch('increment');
const decrement = () => store.dispatch('decrement');
const reset = () => store.dispatch('reset');
</script>

<template>
  <div class="counter">
    <button @click="decrement">-</button>
    <span>Count: {{ count }}</span>
    <button @click="increment">+</button>
    <button @click="reset" class="reset">Reset</button>
  </div>
</template>
```

### Vuex ã¨ã®é•ã„

Vuex ã®ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€Vuex ã¨ Pinia ã«ã¯å¤šãã®å…±é€šç‚¹ãŒã‚ã‚Šã¾ã™ãŒã€API ã®è¨­è¨ˆã‚„çŠ¶æ…‹å¤‰æ›´ã®æµã‚Œã«ã„ãã¤ã‹é‡è¦ãªé•ã„ãŒã‚ã‚Šã¾ã™ã€‚

### çŠ¶æ…‹å¤‰æ›´ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®é•ã„

- **Vuex**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ â†’ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆä»»æ„ï¼‰ â†’ ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ â†’ çŠ¶æ…‹å¤‰æ›´  
- **Pinia**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ â†’ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ â†’ çŠ¶æ…‹å¤‰æ›´  

Vuex ã§ã¯ã€çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã«å¿…ãš **ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³** ã‚’çµŒç”±ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¸€æ–¹ã€Pinia ã§ã¯ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å»ƒæ­¢ã—ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ç›´æ¥çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹è¨­è¨ˆã«ãªã£ã¦ã„ã¾ã™ã€‚

#### Mutation ãŒå»ƒæ­¢ã•ã‚ŒãŸèƒŒæ™¯

Pinia ã®é–‹ç™ºè€…ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¿°ã¹ã¦ã„ã¾ã™ã€‚

> After many years using Vuex, most mutations were completely unnecessary as they were merely doing a single operation via an assignment (=) or collection methods like push.  

https://github.com/vuejs/pinia/issues/58

Vuex ã®ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€å˜ç´”ãªçŠ¶æ…‹å¤‰æ›´ï¼ˆä¾‹: `state.count++`ï¼‰ãŒã»ã¨ã‚“ã©ã§ã€ãã®å†—é•·æ€§ã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã«å»ƒæ­¢ã•ã‚Œã¾ã—ãŸã€‚ã“ã®å¤‰æ›´ã«ã‚ˆã‚Šã€**ã‚³ãƒ¼ãƒ‰ãŒç°¡æ½”ã«ãªã‚Šã€é–‹ç™ºè€…ã®è² æ‹…ãŒè»½æ¸›** ã•ã‚Œã¾ã™ã€‚

Pinia ã§ã¯ã€ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãªã—ã§ã‚‚ **DevTools** ã«ã‚ˆã‚‹çŠ¶æ…‹è¿½è·¡ãŒå¯èƒ½ãªãŸã‚ã€ãƒ‡ãƒãƒƒã‚°ä½“é¨“ãŒæãªã‚ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®é•ã„

Pinia ã¨ Vuex ã§ã¯ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«ã‚‚é•ã„ãŒã‚ã‚Šã¾ã™ã€‚

#### Vuex ã®ä¾‹ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹é€ ï¼‰

```plaintext
src
â””â”€â”€ store
    â”œâ”€â”€ index.ts         # Vuex ã‚’åˆæœŸåŒ–
    â””â”€â”€ modules
        â”œâ”€â”€ module1.ts   # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«1
        â”œâ”€â”€ module2.ts   # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«2
```

#### Pinia ã®ä¾‹ï¼ˆã‚¹ãƒˆã‚¢æ§‹é€ ï¼‰

```plaintext
src
â””â”€â”€ stores
    â”œâ”€â”€ counter.ts       # Counter ã‚¹ãƒˆã‚¢
    â”œâ”€â”€ module1.ts       # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«1ã‚’ç‹¬ç«‹ã—ãŸã‚¹ãƒˆã‚¢ã¨ã—ã¦ç§»è¡Œ
    â”œâ”€â”€ module2.ts       # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«2ã‚’ç‹¬ç«‹ã—ãŸã‚¹ãƒˆã‚¢ã¨ã—ã¦ç§»è¡Œ
```

Pinia ã¯ **ã€Œè¤‡æ•°ã®ã‚¹ãƒˆã‚¢ã‚’æŒã¤è¨­è¨ˆã€** ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€`stores` ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåãŒä¸€èˆ¬çš„ã§ã™ã€‚Vuex ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€Pinia ã§ã¯ãã‚Œãã‚Œç‹¬ç«‹ã—ãŸã‚¹ãƒˆã‚¢ã¨ã—ã¦å†æ§‹æˆã•ã‚Œã¾ã™ã€‚

## ã¾ã¨ã‚

æœ¬è¨˜äº‹ã§ã¯ã€Vue.js ã®å…¬å¼çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ **Pinia** ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‹ã‚‰ã€Vuex ã¨ã®é•ã„ã€ãã—ã¦ç§»è¡Œã®ãƒã‚¤ãƒ³ãƒˆã¾ã§ã‚’è§£èª¬ã—ã¾ã—ãŸã€‚

Pinia ã®å¤§ããªç‰¹é•·ã¯ã€ä»¥ä¸‹ã®ç‚¹ã«ã‚ã‚Šã¾ã™ï¼š

- **ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„ãª API** ã«ã‚ˆã‚Šã€é–‹ç™ºä½“é¨“ãŒå¤§å¹…ã«å‘ä¸Šã™ã‚‹ã€‚
- **ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å»ƒæ­¢** ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ã®ç°¡æ½”åŒ–ã€‚
- **TypeScript ã¨ã®è¦ªå’Œæ€§** ã§å‹å®‰å…¨ãªé–‹ç™ºãŒå¯èƒ½ã€‚
- **Vue DevTools ã¨ã®çµ±åˆ** ã«ã‚ˆã‚‹é«˜åº¦ãªãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã€‚

ã¾ãŸã€Vuex ã‹ã‚‰ Pinia ã¸ã®ç§»è¡Œã‚’è€ƒãˆã¦ã„ã‚‹æ–¹ã¯ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ï¼š

https://pinia.vuejs.org/cookbook/migration-vuex.html#Restructuring-Modules-to-Stores

Pinia ã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€Vue.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ç®¡ç†ãŒã©ã‚Œã ã‘åŠ¹ç‡çš„ã«ãªã‚‹ã‹ã‚’ã€ãœã²ä½“é¨“ã—ã¦ã¿ã¦ãã ã•ã„ã€‚Vue.js ã®é–‹ç™ºãŒã•ã‚‰ã«å¿«é©ã§æ¥½ã—ã„ã‚‚ã®ã«ãªã‚‹ã¯ãšã§ã™ã€‚
