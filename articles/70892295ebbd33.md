---
title: "Blob ã‚’åˆ©ç”¨ã—ãŸcsvãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®å®Ÿè£…"
emoji: "ğŸ“"
type: "tech"
topics: [
  'javascript',
  'Blob',
]
published: true
---

# æ¦‚è¦

ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã‚ãšã«ã€Blobã‚’åˆ©ç”¨ã—ã¦csvãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ã¿ã¾ã—ãŸã€‚

# Blobã¨ã¯

> Blobã¯ã€ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚Blobã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ç”»åƒã€å‹•ç”»ãªã©ã®ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

https://developer.mozilla.org/ja/docs/Web/API/Blob

# Blobã‚’åˆ©ç”¨ã—ãŸcsvãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

## Blobã‚’ä½œæˆã™ã‚‹

ä»Šå›ã®ã‚±ãƒ¼ã‚¹ã§ã¯ã€Blobã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®ã‚ˆã†ãªè¦ç´ ã§æ§‹æˆã•ã‚ŒãŸCSVã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¾ã™ã€‚

```csv
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰,é …ç›®,1,2,3,4,5
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰,é …ç›®,ã‚µãƒ³ãƒ—ãƒ«,ã‚µãƒ³ãƒ—ãƒ«,ã‚µãƒ³ãƒ—ãƒ«,ã‚µãƒ³ãƒ—ãƒ«,ã‚µãƒ³ãƒ—ãƒ«
,URL,https://example.com/,https://example.com/,https://example.com/,https://example.com/,https://example.com/
```

csvã«æ›¸ãå‡ºã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã—ã¾ã™ã€‚

å®šç¾©ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã€Blobã«å¤‰æ›ã—ã€`setAttribute`ã§`download`å±æ€§ã‚’ä»˜ä¸ã—ã¾ã™ã€‚

æœ€å¾Œã«ã€`click`ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã•ã›ã‚‹ã“ã¨ã§ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚

```javascript
import dayjs from 'dayjs'

const csvHeader = ['ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰', 'é …ç›®', ...Array.from(Array(5).keys()).map((i) => i + 1)]
const csvRowTitle = ['ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰', 'é …ç›®', ...Array.from(Array(5).keys()).map(() => "ã‚µãƒ³ãƒ—ãƒ«")]
const csvRowURL = [null, 'URL', ...Array.from(Array(5).keys()).map(() => "https://example.com/")]

// CSVå½¢å¼ã§æ›¸ãå‡ºã™ãŸã‚æ”¹è¡Œã‚’å„è¡Œã«è¿½åŠ ã™ã‚‹
csvHeader[csvHeader.length - 1] = csvHeader[csvHeader.length - 1] + '\n'
csvRowTitle[csvRowTitle.length - 1] = csvRowTitle[csvRowTitle.length - 1] + '\n'
csvRowURL[csvRowURL.length - 1] = csvRowURL[csvRowURL.length - 1] + '\n'
const csvBody = Array(csvRowTitle + csvRowURL)
const csvContent = csvHeader.toString() + csvBody.join('')

const blob = new Blob([csvContent], {type: 'text/csv'})
const url = URL.createObjectURL(blob)
const link = document.createElement('a')
const today = dayjs().format('YYYYMMDD')
link.setAttribute('href', url)
link.setAttribute('download', `${today}_recipe_export.csv`)
link.click()
```

## ã¾ã¨ã‚

Blobã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã‚ãšã«ã€csvãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

åŸºæœ¬çš„ã«ã¯ `npm` ç­‰ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã§ã€ç°¡å˜ã«å®Ÿè£…ã§ãã‚‹ã®ã§ã€Blobã‚’åˆ©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã©ã†ã‹ã¯ã€æ¤œè¨ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

ä»Šå›ã¯ã€ç°¡æ˜“çš„ãªå®Ÿè£…ã‚’ç›®çš„ã¨ã—ã¦ã€Blobã‚’åˆ©ç”¨ã—ã¾ã—ãŸã€‚